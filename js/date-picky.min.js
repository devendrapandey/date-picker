/**
 * date-picky
 * @author Samip Shrestha <javasamip@gmail.com>
 * To support the developer please include this comment section
 */
!function(e){"use strict";e.fn.datePicky=function(a){var t=this,i={multipleDate:!0,format:"YYYY-MM-DD",animation:"",bodyBackground:"#fff",showCurrentDate:!0,activation:"alwaysOn",singleCalendarMode:!1,disableClickToggle:!1,showCurrentDateButton:!0,disableClickEvent:!1,setWeekHoliday:!1,holiday:"sunday"},s=e.extend(i,a),r=new Date,n=r.getFullYear(),l=r.getMonth(),o=[],d=r.getDate(),c=["Su","Mo","Tu","We","Th","Fr","Sa"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=function(e,a){return new Date(a,e,0).getDate()},p={setTable:function(a,t,i){var s=e("<table/>",{"class":"datePicker-calendar"}),r=e("<div/>",{"class":"table-overlay"});return a=p.setHeading(a,t,i),a.append(s),i.disableClickEvent&&s.append(r),s=p.setDays(s,i.setWeekHoliday,i.holiday),s=p.setDates(s,t,i),i.singleCalendarMode||i.showCurrentDateButton&&(a=p.setFooter(a,t,i)),a},formatDate:function(e){return e>=1&&9>=e&&(e="0"+e),e},formattedDate:function(e,a,t,i){return e+i+a+i+t},getDateFormat:function(e,a){var t,i=e.split("-");return"DD/MM/YYYY"==a?t=p.formattedDate(i[2],i[1],i[0],"/"):"MM/DD/YYYY"==a?t=p.formattedDate(i[1],i[2],i[0],"/"):"DD-MM-YYYY"==a?t=p.formattedDate(i[2],i[1],i[0],"-"):"mm-dd-yy"==a?t=p.formattedDate(i[1],i[2],i[0],"-"):"YYYY-MM-DD"==a?t=p.formattedDate(i[0],i[1],i[2],"-"):"D MMM, YYYY"==a?t=i[2]+" "+u[parseInt(i[1])-1]+", "+i[0]:"D MMMM, YYYY"==a?t=i[2]+" "+f[parseInt(i[1])-1]+", "+i[0]:jQuery.error("The defined date format is not supported "+a+" ."),t},setHeading:function(a,t,i){var s=e("<div/>",{"class":"calendar-heading"}),r=e("<div/>",{"class":"month-title"}),o=e("<div/>",{"class":"next",title:"Next Month"}),d=e("<div/>",{"class":"prev",title:"Previous Month"});return r.text(f[l]+" "+n),i.singleCalendarMode?s.append(r):(s.append(d),s.append(r),s.append(o),r.css({width:"calc(100% - 40px)","float":"left"})),o.click(function(e){a.empty(),l>=11?(l=0,n+=1):l+=1,a=p.setTable(a,t,i)}),d.click(function(){a.empty(),0>=l?(l=11,n-=1):l-=1,a=p.setTable(a,t,i)}),a.append(s)},setFooter:function(a,t,i){var s=e("<div/>",{"class":"footer-wrapper"});return s.text("Go to current date"),s.on("click",function(){a.empty(),n=r.getFullYear(),l=r.getMonth(),d=r.getDate(),a=p.setTable(a,t,i)}),a.append(s)},setValue:function(a,t,i){var s;if(p.updateActiveDates(t,i),i.multipleDate)for(var r=0;r<o.length;r++)s=p.getDateFormat(o[r],i.format),0==r?e(a).val(s):e(a).val(e(a).val()+", "+s);else e(a).val(p.getDateFormat(o[0],i.format)),v.removeDatePicker(a);i.callback?(i.callback.call(this,e(t).attr("date-value")),i.disableClickToggle||e(t).toggleClass("active")):i.disableClickToggle||e(t).toggleClass("active")},checkForMinDate:function(e,a,t,i,s){return a<s[2]?e.addClass("disabled"):a==s[2]&&(t<s[1]?e.addClass("disabled"):t==s[1]&&i<s[0]&&e.addClass("disabled")),e},checkForMaxDate:function(e,a,t,i,s){return a>s[2]?e.addClass("disabled"):a==s[2]&&(t>s[1]?e.addClass("disabled"):t==s[1]&&i>s[0]&&e.addClass("disabled")),e},checkForActiveDates:function(e,a,t,i,s){for(var r=0;r<s.length;r++)s[r][0]==a&&s[r][1]==t&&s[r][2]==i&&e.addClass("active");return e},updateActiveDates:function(a,t){var i=e(a).attr("date-value"),s=e.inArray(i,o);!t.disableClickToggle&&t.multipleDate||!t.disableClickToggle&&"alwaysOn"==t.activation?s>-1&&e(a).hasClass("active")?o.splice(s,1):o.push(i):o[0]=i},setDates:function(a,t,i){var s,r,c=[];if(i.minDate&&(s=i.minDate.split("/")),i.maxDate&&(r=i.maxDate.split("/")),o)for(f=0;f<o.length;f++)c[f]=o[f].split("-");for(var f=1;f<=D(l+1,n);f){for(var u=e("<tr/>",{"class":"row-"+f}),v=new Date(n,l,1).getDay(),h=1;7>=h;h++,f++){var g=e("<td/>",{"class":"curr-month-date"});if(1==f){var m=D(l,n),k=l,C=n;0>=l&&(k=12,C=n-1);for(var M=v-1;M>=0;M--){var y=e("<td/>",{"class":"prev-month-date"});i.singleCalendarMode&&y.addClass("hidden"),i.minDate&&(y=p.checkForMinDate(y,C,k,parseInt(m)-M,s)),i.maxDate&&(y=p.checkForMaxDate(y,C,k,parseInt(m)-M,r)),y=p.checkForActiveDates(y,C,k,parseInt(m)-M,c),y.attr("date-value",C+"-"+p.formatDate(k)+"-"+p.formatDate(parseInt(m)-M)),y.text(m-M),u.append(y),h++,y.on("click",function(a){e(a.target).hasClass("disabled")||p.setValue(t,this,i)})}}else if(f>D(l+1,n)){var b=1,Y=l+2,x=n;l>=11&&(Y=1,x=n+1);for(var M=u.children().length;7>M;M++,b++){var F=e("<td/>",{"class":"next-month-date"});i.singleCalendarMode&&F.addClass("hidden"),i.minDate&&(F=p.checkForMinDate(F,x,Y,b,s)),i.maxDate&&(F=p.checkForMaxDate(F,x,Y,b,r)),F=p.checkForActiveDates(F,x,Y,b,c),F.attr("date-value",x+"-"+p.formatDate(Y)+"-"+p.formatDate(b)),F.text(b),u.append(F),h++,F.on("click",function(a){e(a.target).hasClass("disabled")||p.setValue(t,this,i)})}break}if(i.showCurrentDate&&f==d){var w=new Date;l==w.getMonth()&&n==w.getFullYear()&&g.addClass("today")}7==h&&"saturday"==i.holiday.toLowerCase()?i.setWeekHoliday&&g.addClass("red"):1==h&&"sunday"==i.holiday.toLowerCase()&&i.setWeekHoliday&&g.addClass("red"),i.minDate&&(g=p.checkForMinDate(g,n,parseInt(l)+1,f,s)),i.maxDate&&(g=p.checkForMaxDate(g,n,parseInt(l)+1,f,r)),g=p.checkForActiveDates(g,n,parseInt(l)+1,f,c),g.attr("date-value",n+"-"+p.formatDate(parseInt(l)+1)+"-"+p.formatDate(f)),g.text(f),g.click(function(a){e(a.target).hasClass("disabled")||p.setValue(t,this,i)}),u.append(g)}a.append(u)}return a},setDays:function(a,t,i){for(var s=e("<tr/>",{"class":"col"}),r=0;r<c.length;r++){var n=e("<th/>");n.text(c[r]),s.append(n)}return t&&"saturday"==i.toLowerCase()?s.children().last().addClass("red"):t&&s.children().first().addClass("red"),a.append(s),a}},v={setDatePicker:function(a,t){var i=e("<div/>",{"class":"datePicker"});i=p.setTable(i,a,t),i.addClass("animated "+t.animation),"onClick"==t.activation&&i.css({background:t.bodyBackground}),i.insertAfter(e(a)),"onClick"==t.activation&&(e(a).parent().css({position:"relative"}),i.css({position:"absolute",marginTop:"5px",top:" 100%",zIndex:4})),i.animate({opacity:1},300)},removeDatePicker:function(a){e(a).next(".datePicker").animate({opacity:0},150,function(){e(a).next(".datePicker").remove()})}};s.preDates&&(o=s.preDates),"alwaysOn"==s.activation?e(t).next(".datePicker").length<=0&&v.setDatePicker(t,s):(e(t).focus(function(){e(t).next(".datePicker").length<=0&&v.setDatePicker(t,s)}),e(document).click(function(a){var i=e(".datePicker");e(t).is(a.target)||i.is(a.target)||0!=i.find("."+a.target.classList[0]).length||0!=e(i).has(a.target).length||v.removeDatePicker(t)}))}}(jQuery);