/**
 * date-picky
 * @author Samip Shrestha <javasamip@gmail.com>
 * To support the developer please include this comment section
 */!function(e){"use strict";e.fn.datePicky=function(a){var t=this,i={multipleDate:!0,format:"YYYY-MM-DD",animation:"",showCurrentDate:!0,activation:"alwaysOn",singleCalendarMode:!1,disableClickToggle:!1,showCurrentDateButton:!0,disableClickEvent:!1,setWeekHoliday:!1,holiday:"sunday"},s=Object.assign({},i,a),r=new Date,n=r.getFullYear(),l=r.getMonth(),o=[],d=r.getDate(),c=["Su","Mo","Tu","We","Th","Fr","Sa"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.defaultViewYear&&(n=a.defaultViewYear),a.defaultViewMonth&&(l=a.defaultViewMonth-1);var D=function(e,a){return new Date(a,e,0).getDate()},p={setTable:function(a,t,i){var s=e("<table/>",{"class":"datePicker-calendar"}),r=e("<div/>",{"class":"table-overlay"});return a=p.setHeading(a,t,i),a.append(s),i.disableClickEvent&&s.append(r),s=p.setDays(s,i.setWeekHoliday,i.holiday),s=p.setDates(s,t,i),i.singleCalendarMode||i.showCurrentDateButton&&(a=p.setFooter(a,t,i)),a},formatDate:function(e){return e>=1&&9>=e&&(e="0"+e),e},formattedDate:function(e,a,t,i){return e+i+a+i+t},getDateFormat:function(e,a){var t,i=e.split("-");return"DD/MM/YYYY"===a?t=p.formattedDate(i[2],i[1],i[0],"/"):"MM/DD/YYYY"===a?t=p.formattedDate(i[1],i[2],i[0],"/"):"DD-MM-YYYY"===a?t=p.formattedDate(i[2],i[1],i[0],"-"):"MM-DD-YYYY"===a?t=p.formattedDate(i[1],i[2],i[0],"-"):"YYYY-MM-DD"===a?t=p.formattedDate(i[0],i[1],i[2],"-"):"D MMM, YYYY"===a?t=i[2]+" "+u[parseInt(i[1])-1]+", "+i[0]:"D MMMM, YYYY"===a?t=i[2]+" "+f[parseInt(i[1])-1]+", "+i[0]:jQuery.error("The defined date format is not supported "+a+" ."),t},setHeading:function(a,t,i){var s=e("<div/>",{"class":"calendar-heading"}),r=e("<div/>",{"class":"month-title"}),o=e("<div/>",{"class":"next",title:"Next Month"}),d=e("<div/>",{"class":"prev",title:"Previous Month"});return r.text(f[l]+" "+n),i.singleCalendarMode?s.append(r):(s.append(d),s.append(r),s.append(o),r.css({width:"calc(100% - 40px)","float":"left"})),o.click(function(e){a.empty(),l>=11?(l=0,n+=1):l+=1,a=p.setTable(a,t,i)}),d.click(function(){a.empty(),0>=l?(l=11,n-=1):l-=1,a=p.setTable(a,t,i)}),a.append(s)},setFooter:function(a,t,i){var s=e("<div/>",{"class":"footer-wrapper"});return s.text("Go to current date"),s.on("click",function(){a.empty(),n=r.getFullYear(),l=r.getMonth(),d=r.getDate(),a=p.setTable(a,t,i)}),a.append(s)},setValue:function(a,t,i){var s;if(p.updateActiveDates(t,i),i.multipleDate)for(var r=0;r<o.length;r++)s=p.getDateFormat(o[r],i.format),0==r?e(a).val(s):e(a).val(e(a).val()+", "+s);else e(a).val(p.getDateFormat(o[0],i.format)),"alwaysOn"!=i.activation&&v.removeDatePicker(a);i.callback?(i.callback.call(this,e(t).attr("date-value"),o),i.disableClickToggle||e(t).toggleClass("active")):i.disableClickToggle||e(t).toggleClass("active")},checkForMinDate:function(e,a,t,i,s){return a<s[0]?e.addClass("disabled"):a==s[0]&&(t<s[1]?e.addClass("disabled"):t==s[1]&&i<s[2]&&e.addClass("disabled")),e},checkForMaxDate:function(e,a,t,i,s){return a>s[0]?e.addClass("disabled"):a==s[0]&&(t>s[1]?e.addClass("disabled"):t==s[1]&&i>s[2]&&e.addClass("disabled")),e},checkForActiveDates:function(e,a,t,i,s){for(var r=0;r<s.length;r++)s[r][0]==a&&s[r][1]==t&&s[r][2]==i&&e.addClass("active");return e},updateActiveDates:function(a,t){var i=e(a).attr("date-value"),s=e.inArray(i,o);!t.disableClickToggle&&t.multipleDate||!t.disableClickToggle&&"alwaysOn"==t.activation?s>-1&&e(a).hasClass("active")?o.splice(s,1):o.push(i):o[0]=i},setDates:function(a,t,i){var s,r,c=[];if(i.minDate&&(s=i.minDate.split("-")),i.maxDate&&(r=i.maxDate.split("-")),o)for(f=0;f<o.length;f++)c[f]=o[f].split("-");for(var f=1;f<=D(l+1,n);f){for(var u=e("<tr/>",{"class":"row-"+f}),v=new Date(n,l,1).getDay(),h=1;7>=h;h++,f++){var g=e("<td/>",{"class":"curr-month-date"});if(1==f){var m=D(l,n),k=l,M=n;0>=l&&(k=12,M=n-1);for(var C=v-1;C>=0;C--){var Y=e("<td/>",{"class":"prev-month-date"});i.singleCalendarMode&&Y.addClass("hidden"),i.minDate&&(Y=p.checkForMinDate(Y,M,k,parseInt(m)-C,s)),i.maxDate&&(Y=p.checkForMaxDate(Y,M,k,parseInt(m)-C,r)),Y=p.checkForActiveDates(Y,M,k,parseInt(m)-C,c),Y.attr("date-value",M+"-"+p.formatDate(k)+"-"+p.formatDate(parseInt(m)-C)),Y.text(m-C),u.append(Y),h++,Y.on("click",function(a){e(a.target).hasClass("disabled")||p.setValue(t,this,i)})}}else if(f>D(l+1,n)){var y=1,b=l+2,x=n;l>=11&&(b=1,x=n+1);for(var C=u.children().length;7>C;C++,y++){var w=e("<td/>",{"class":"next-month-date"});i.singleCalendarMode&&w.addClass("hidden"),i.minDate&&(w=p.checkForMinDate(w,x,b,y,s)),i.maxDate&&(w=p.checkForMaxDate(w,x,b,y,r)),w=p.checkForActiveDates(w,x,b,y,c),w.attr("date-value",x+"-"+p.formatDate(b)+"-"+p.formatDate(y)),w.text(y),u.append(w),h++,w.on("click",function(a){e(a.target).hasClass("disabled")||p.setValue(t,this,i)})}break}if(i.showCurrentDate&&f==d){var F=new Date;l==F.getMonth()&&n==F.getFullYear()&&g.addClass("today")}i.setWeekHoliday&&(7==h&&"saturday"==i.holiday.toLowerCase()?g.addClass("red"):1==h&&"sunday"==i.holiday.toLowerCase()&&g.addClass("red")),i.minDate&&(g=p.checkForMinDate(g,n,parseInt(l)+1,f,s)),i.maxDate&&(g=p.checkForMaxDate(g,n,parseInt(l)+1,f,r)),g=p.checkForActiveDates(g,n,parseInt(l)+1,f,c),g.attr("date-value",n+"-"+p.formatDate(parseInt(l)+1)+"-"+p.formatDate(f)),g.text(f),g.click(function(a){e(a.target).hasClass("disabled")||p.setValue(t,this,i)}),u.append(g)}a.append(u)}return a},setDays:function(a,t,i){for(var s=e("<tr/>",{"class":"col"}),r=0;r<c.length;r++){var n=e("<th/>");n.text(c[r]),s.append(n)}return t&&"saturday"==i.toLowerCase()?s.children().last().addClass("red"):t&&"sunday"==i.toLowerCase()&&s.children().first().addClass("red"),a.append(s),a}},v={setDatePicker:function(a,t){var i=e("<div/>",{"class":"datePicker"});i=p.setTable(i,a,t),i.addClass("animated "+t.animation),i.insertAfter(e(a)),"onClick"==t.activation&&(e(a).parent().css({position:"relative"}),i.css({position:"absolute",marginTop:"5px",top:" 100%",zIndex:4})),i.animate({opacity:1},300)},removeDatePicker:function(a){e(a).next(".datePicker").animate({opacity:0},150,function(){e(a).next(".datePicker").remove()})}};s.preDates&&(o=s.preDates),"alwaysOn"==s.activation?e(t).next(".datePicker").length<=0&&v.setDatePicker(t,s):(e(t).focus(function(){e(t).next(".datePicker").length<=0&&v.setDatePicker(t,s)}),e(document).click(function(a){var i=e(".datePicker");e(t).is(a.target)||i.is(a.target)||0!=i.find("."+a.target.classList[0]).length||0!=e(i).has(a.target).length||v.removeDatePicker(t)}))}}(jQuery);